<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="paperformat_reward_by_month" model="report.paperformat">
      <field name="name">A3 Portrait</field>
      <field name="format">A3</field>
      <field name="orientation">Portrait</field>
      <field name="margin_top">7</field>
      <field name="margin_bottom">7</field>
      <field name="margin_left">7</field>
      <field name="margin_right">7</field>
      <field name="header_line" eval="False" />
      <field name="header_spacing">20</field>
      <field name="dpi">90</field>
    </record>
    <record id="action_reward_by_month_report" model="ir.actions.report">
      <field name="name">In xét thưởng tháng</field>
      <field name="model">reward.by.month</field>
      <field name="report_type">qweb-pdf</field>
      <field name="report_name">caosu.reward_by_month_template</field>
      <field name="binding_model_id" ref="model_reward_by_month" />
      <field name="binding_type">report</field>
      <field name="paperformat_id" ref="paperformat_reward_by_month" />
    </record>

    <template id="reward_by_month_template">
    <t t-call="web.html_container">
      <t t-call="web.internal_layout">
        <div class="page" style="font-family:arial; font-size: 14.9px;">
          <t t-foreach="docs" t-as="o">
            <div class="row">
              <h5>BẢNG XÉT THƯỞNG THÁNG <span t-field="o.to.name" /> THÁNG <span t-field="o.thang" /> NĂM <span t-field="o.nam" /></h5>
            </div>
            <br></br>             
            <div class="row">
              <table width="100%">
                <thead>
                  <tr style="border: 1px solid black; border-collapse: collapse; text-align: center; font-size: 16.9px;">
                      <th style="padding-left: 5px; border-right-style: solid;">STT</th>
                      <th style="border-right-style: solid;padding-top: 1px; padding-bottom: 1px; padding-left: 1px; padding-right: 1px; width: 120px;">Công Nhân</th>
                      <th style="border-right-style: solid;">CP</th>
                      <th style="border-right-style: solid;">KP</th>
                      <th style="border-right-style: solid;">Chuyên cần</th>
                      <th style="border-right-style: solid;">Kỹ thuật</th>                      
                      <th style="border-right-style: solid;">Tận thu mũ</th>
                      <th style="border-right-style: solid;">Tích cực</th>
                      <th style="border-right-style: solid;">Đi xa</th>
                      <th style="border-right-style: solid;">Tổng điểm</th>
                      <th style="border-right-style: solid;">Tổng điểm TL</th>
                      <th style="border-right-style: solid;">Quy khô</th>
                      <th style="border-right-style: solid;">Kế hoạch</th>
                      <th style="border-right-style: solid;">% Đạt</th>
                      <th style="border-right-style: solid;">Giá thưởng</th>
                      <th t-if="o.chiquy_pl != 0" style="border-right-style: solid;">Chi Quỹ PL</th>
                      <th style="border-right-style: solid;">Phúc lợi TL</th>                      
                  </tr>
                </thead>
                <tbody>
                  <t t-foreach="o.reward_line_ids.sorted(key=lambda record: record.sttcn, reverse=False)" t-as="line">
                    <tr style="border: 1px solid black; border-collapse: collapse; text-align: center;">
                      <td style="padding-top: 5px; padding-bottom: 5px; padding-left: 2px; padding-right: 2px; border-right-style: solid;">
                        <span t-field="line.sttcn"/>
                      </td>
                      <td style="padding-top: 1px; padding-bottom: 1px; padding-left: 1px; padding-right: 1px; font-weight: bold; border-right-style: solid;">
                        <span t-field="line.employee_id.name"/>
                      </td>
                      <td style="padding-top: 5px; padding-bottom: 5px; padding-left: 2px; padding-right: 2px; border-right-style: solid;">
                        <span t-field="line.cophep"/>
                      </td>
                      <td style="padding-top: 5px; padding-bottom: 5px; padding-left: 2px; padding-right: 2px; border-right-style: solid;">
                        <span t-field="line.kophep"/>
                      </td>
                      <td style="padding-top: 5px; padding-bottom: 5px; padding-left: 2px; padding-right: 2px; border-right-style: solid;">
                        <span t-field="line.chuyencan" t-options='{"widget": "float", "precision": 0}'/>
                      </td>                      
                      <td style="padding-top: 5px; padding-bottom: 5px; padding-left: 2px; padding-right: 2px; border-right-style: solid;">
                        <span t-field="line.tinhkythuat1" t-options='{"widget": "float", "precision": 0}'/>
                      </td>                      
                      <td style="padding-top: 5px; padding-bottom: 5px; padding-left: 2px; padding-right: 2px; border-right-style: solid;">
                        <span t-field="line.tanthumu" t-options='{"widget": "float", "precision": 0}'/>
                      </td>
                      <td style="padding-top: 05x; padding-bottom: 5px; padding-left: 2px; padding-right: 2px; border-right-style: solid;">
                        <span t-field="line.tichcuc" t-options='{"widget": "float", "precision": 0}'/>
                      </td>
                      <td style="padding-top: 5px; padding-bottom: 5px; padding-left: 2px; padding-right: 2px; border-right-style: solid;">
                        <span t-esc="line.dixa" t-options='{"widget": "float", "precision": 0}'/>
                      </td>
                      <td style="padding-top: 5px; padding-bottom: 5px; padding-left: 2px; padding-right: 2px; border-right-style: solid; font-weight: bold;">
                        <span t-esc="line.tongdiem" t-options='{"widget": "float", "precision": 0}'/>
                      </td>
                      <td style="padding-top: 5px; padding-bottom: 5px; padding-left: 2px; padding-right: 2px; border-right-style: solid; font-weight: bold;">
                        <span t-esc="line.tongdiem_tl" t-options='{"widget": "float", "precision": 0}'/>
                      </td>
                      <td style="padding-top: 5px; padding-bottom: 5px; padding-left: 2px; padding-right: 2px; border-right-style: solid;">
                        <span t-esc="line.qk_drc_thang" t-options='{"widget": "float", "precision": 0}'/>
                      </td>
                      <td style="padding-top: 5px; padding-bottom: 5px; padding-left: 2px; padding-right: 2px; border-right-style: solid;">
                        <span t-esc="line.qk_drc_target" t-options='{"widget": "float", "precision": 0}'/>
                      </td>
                      <td style="padding-top: 5px; padding-bottom: 5px; padding-left: 2px; padding-right: 2px; border-right-style: solid; font-weight: bold;">
                        <span t-esc="str(int(round(line.tyle_kehoach*100,0))) + '%'"/>
                      </td>
                      <td style="padding-top: 5px; padding-bottom: 5px; padding-left: 2px; padding-right: 2px; border-right-style: solid;">
                        <span t-esc="line.gia_thuong" t-options='{"widget": "float", "precision": 0}'/>
                      </td>                    
                      <td t-if="o.chiquy_pl != 0" style="padding-top: 5px; padding-bottom: 5px; padding-left: 2px; padding-right: 2px; border-right-style: solid;">
                        <span t-field="line.chiquy_pl" t-options='{"widget": "float", "precision": 0}'/>
                      </td>
                      <td style="padding-top: 5px; padding-bottom: 5px; padding-left: 2px; padding-right: 2px; border-right-style: solid;">
                        <span t-field="line.phucloitl" t-options='{"widget": "float", "precision": 0}'/>
                      </td>                     
                    </tr>
                  </t>
                </tbody>
              </table>
            </div>
            <div style="height: 30px;"></div>
            <div class="row">
              <div class="col-12">
                <table width="100%">
                <tr>
                  <td width="10%" style="font-weight: bold;">Ghi chú</td>
                    <td style="text-align: left; text-decoration: underline;"><span t-field="o.ghichu"/></td>
                </tr>
                </table>
              </div>
              </div>
          </t>
        </div>
      </t>
    </t>
    </template>   

</odoo>
